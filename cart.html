<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>PawPedia ‚Ä¢ Cart</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<div id="navbar"></div>

<div class="cart-page">

  <!-- LEFT -->
  <div class="cart-items">
    <h2>Shopping Cart</h2>
    <div id="cartList"></div>
  </div>

  <!-- RIGHT -->
  <div class="cart-summary">
    <h3>Order Summary</h3>
    <p id="subtotalText">Subtotal: Rs 0</p>

    <button class="checkout-btn" onclick="placeOrder()">
      Proceed to Buy
    </button>
  </div>

</div>

<script>
const PRICES = {
  "Premium Dog Food": 899,
  "Chew Toy": 399,
  "Dog Shampoo": 450
};

let cart = JSON.parse(localStorage.getItem("cart")) || [];

function renderCart() {
  const list = document.getElementById("cartList");
  list.innerHTML = "";

  if (cart.length === 0) {
    list.innerHTML = "<p>Your cart is empty üõí</p>";
    updateSummary();
    return;
  }

  cart.forEach((item, index) => {
    const div = document.createElement("div");
    div.className = "cart-item";

    div.innerHTML = `
      <div class="cart-info">
        <strong>${item}</strong>
        <p>Rs ${PRICES[item]}</p>

        <div class="qty">
          <button onclick="changeQty(${index}, -1)">‚àí</button>
          <span>1</span>
          <button onclick="changeQty(${index}, 1)">+</button>
        </div>

        <button class="delete-btn" onclick="removeItem(${index})">
          Delete
        </button>
      </div>
    `;

    list.appendChild(div);
  });

  updateSummary();
}

function changeQty(index, delta) {
  if (delta === -1) {
    cart.splice(index, 1);
  } else {
    cart.push(cart[index]);
  }
  saveCart();
}

function removeItem(index) {
  cart.splice(index, 1);
  saveCart();
}

function updateSummary() {
  let total = 0;
  cart.forEach(i => total += PRICES[i]);
  document.getElementById("subtotalText").innerText =
    `Subtotal (${cart.length} items): Rs ${total}`;
}

function saveCart() {
  localStorage.setItem("cart", JSON.stringify(cart));
  renderCart();
  updateCartBadge();
}

function placeOrder() {
  if (cart.length === 0) {
    alert("Your cart is empty üõí");
    return;
  }
  alert("üéâ Order placed successfully!\nThank you for shopping with PawPedia üê∂");
  cart = [];
  localStorage.removeItem("cart");
  renderCart();
  updateCartBadge();
}

function updateCartBadge() {
  const badge = document.getElementById("cart-count");
  if (!badge) return;
  badge.style.display = cart.length ? "inline-block" : "none";
  badge.innerText = cart.length;
}

document.addEventListener("DOMContentLoaded", renderCart);
</script>

<script>
fetch("navbar.html")
  .then(r => r.text())
  .then(t => navbar.innerHTML = t);
</script>

<script>
function logout() {
  localStorage.clear();
  window.location.href = "index.html";
}
</script>

</body>
</html>
